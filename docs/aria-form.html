<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ARIA Role Selectors - TesterUtilities</title>
    <link rel="stylesheet" href="css/styles.css" />
  </head>
  <body>
    <div id="navigation-container"></div>

    <div class="content">
      <h1>ARIA Role Selectors</h1>

      <div class="explanation">
        <h2>What are ARIA Role Selectors?</h2>
        <p>
          Role selectors target elements based on their ARIA role or implicit HTML role.
          This approach aligns with how users interact with your application through
          assistive technologies, making your tests more resilient and aligned with
          accessibility practices.
        </p>
        <p>
          Using <code>getByRole</code> is often considered the most robust selector
          strategy because it:
        </p>
        <ul>
          <li>Prioritizes accessibility</li>
          <li>Resists UI implementation changes</li>
          <li>Follows user interaction patterns</li>
          <li>Remains stable across design changes</li>
        </ul>
      </div>

      <div class="form-container">
        <h2>Registration Form with ARIA Roles</h2>
        <p>
          This form demonstrates elements that can be targeted by their ARIA roles and
          properties.
        </p>

        <form id="registration-form" class="test-form" aria-labelledby="form-heading">
          <h3 id="form-heading">Create Your Account</h3>

          <div class="form-group">
            <label for="email">Email Address</label>
            <input type="email" id="email" name="email" required autocomplete="email" />
          </div>

          <div class="form-group">
            <label for="password">Password</label>
            <input
              type="password"
              id="password"
              name="password"
              required
              autocomplete="new-password"
            />
          </div>

          <div class="form-group">
            <label for="confirm-password">Confirm Password</label>
            <input
              type="password"
              id="confirm-password"
              name="confirmPassword"
              required
              autocomplete="new-password"
            />
          </div>

          <div class="form-group">
            <label for="first-name">First Name</label>
            <input
              type="text"
              id="first-name"
              name="firstName"
              autocomplete="given-name"
            />
          </div>

          <div class="form-group">
            <label for="last-name">Last Name</label>
            <input
              type="text"
              id="last-name"
              name="lastName"
              autocomplete="family-name"
            />
          </div>

          <div class="form-group">
            <label for="phone">Phone Number</label>
            <input type="tel" id="phone" name="phone" autocomplete="tel" />
          </div>

          <div class="form-group">
            <label for="country">Country</label>
            <select id="country" name="country" aria-label="Country selection">
              <option value="">Select Country</option>
              <option value="us">United States</option>
              <option value="ca">Canada</option>
              <option value="uk">United Kingdom</option>
              <option value="au">Australia</option>
              <option value="pl">Poland</option>
              <option value="de">Germany</option>
              <option value="fr">France</option>
            </select>
          </div>

          <div class="form-group">
            <label for="birthdate">Date of Birth</label>
            <input type="date" id="birthdate" name="birthdate" />
          </div>

          <div class="form-group">
            <label class="checkbox-label">
              <input
                type="checkbox"
                name="newsletter"
                aria-label="Subscribe to newsletter"
              />
              Subscribe to newsletter
            </label>
          </div>

          <fieldset>
            <legend>Gender</legend>
            <div class="radio-group">
              <label class="radio-label">
                <input
                  type="radio"
                  name="gender"
                  value="male"
                  aria-describedby="gender-hint"
                />
                Male
              </label>
              <label class="radio-label">
                <input type="radio" name="gender" value="female" />
                Female
              </label>
              <label class="radio-label">
                <input type="radio" name="gender" value="other" />
                Other
              </label>
            </div>
            <div id="gender-hint" class="hint-text">
              Select your gender for demographic purposes
            </div>
          </fieldset>

          <div class="form-group">
            <label for="comments">Additional Comments</label>
            <textarea
              id="comments"
              name="comments"
              rows="3"
              aria-label="Additional comments"
            ></textarea>
          </div>

          <div class="form-actions">
            <button type="reset" aria-label="Reset form">Reset Form</button>
            <button type="submit" aria-label="Submit registration">Register</button>
          </div>
        </form>

        <div id="form-result"></div>
      </div>

      <div class="reference-section">
        <h2>ARIA Role Selectors JSON Configuration</h2>
        <p>
          Copy this JSON configuration to test the form with TesterUtilities extension. It
          uses <code>getByRole</code> selectors to target elements by their ARIA roles and
          accessible properties.
        </p>

        <div class="code-container">
          <pre id="json-config">
{
  "email": {
    "selector": "textbox",
    "queryType": "role",
    "queryOptions": {
      "name": "Email Address"
    },
    "type": "input",
    "dataType": "function",
    "dataGenerator": "fakerEmail"
  },
  "password": {
    "selector": "textbox",
    "queryType": "role",
    "queryOptions": {
      "name": "Password"
    },
    "type": "input",
    "data": "SecurePassword123!",
    "dataType": "static"
  },
  "confirmPassword": {
    "selector": "textbox",
    "queryType": "role",
    "queryOptions": {
      "name": "Confirm Password"
    },
    "type": "input",
    "data": "SecurePassword123!",
    "dataType": "static"
  },
  "firstName": {
    "selector": "textbox",
    "queryType": "role",
    "queryOptions": {
      "name": "First Name"
    },
    "type": "input",
    "dataType": "function",
    "dataGenerator": "fakerFirstName"
  },
  "lastName": {
    "selector": "textbox",
    "queryType": "role",
    "queryOptions": {
      "name": "Last Name"
    },
    "type": "input",
    "dataType": "function",
    "dataGenerator": "fakerLastName"
  },
  "phoneNumber": {
    "selector": "textbox",
    "queryType": "role",
    "queryOptions": {
      "name": "Phone Number"
    },
    "type": "input",
    "dataType": "function",
    "dataGenerator": "generatePolishMobile"
  },
  "country": {
    "selector": "combobox",
    "queryType": "role",
    "queryOptions": {
      "name": "Country selection"
    },
    "type": "input",
    "data": "pl",
    "dataType": "static"
  },
  "birthdate": {
    "selector": "textbox",
    "queryType": "role",
    "queryOptions": {
      "name": "Date of Birth"
    },
    "type": "input",
    "dataType": "function",
    "dataGenerator": "generateRandomDate:18:65"
  },
  "newsletter": {
    "selector": "checkbox",
    "queryType": "role",
    "queryOptions": {
      "name": "Subscribe to newsletter"
    },
    "type": "checkCheckbox"
  },
  "genderMale": {
    "selector": "radio",
    "queryType": "role",
    "queryOptions": {
      "name": "Male"
    },
    "type": "checkCheckbox"
  },
  "comments": {
    "selector": "textbox",
    "queryType": "role",
    "queryOptions": {
      "name": "Additional comments"
    },
    "type": "input",
    "dataType": "function",
    "dataGenerator": "fakerRaw:lorem.paragraph:pl"
  },
  "submitButton": {
    "selector": "button",
    "queryType": "role",
    "queryOptions": {
      "name": "Submit registration"
    },
    "type": "simpleClick"
  }
}</pre
          >
          <button class="copy-button" data-target="json-config">Copy JSON</button>
        </div>

        <h3>How Role Selectors Work</h3>
        <p>
          In the TesterUtilities extension, role selectors use the
          <code>getByRole</code> function, which finds elements with the specified
          accessible role and name.
        </p>

        <div class="code-container">
          <pre id="code-example">
// Example of how getByRole works:
function getByRole(document, role, options = {}) {
  const { name, exact = false, index = 0 } = options;
  
  // Find all elements with the given role
  const elements = Array.from(document.querySelectorAll(`[role="${role}"]`));
  
  // Also include elements with implicit roles
  if (role === 'textbox') {
    elements.push(...document.querySelectorAll('input[type="text"], input[type="email"], input[type="password"], input[type="tel"], textarea'));
  } else if (role === 'button') {
    elements.push(...document.querySelectorAll('button, input[type="button"], input[type="submit"]'));
  } else if (role === 'checkbox') {
    elements.push(...document.querySelectorAll('input[type="checkbox"]'));
  } else if (role === 'radio') {
    elements.push(...document.querySelectorAll('input[type="radio"]'));
  } else if (role === 'combobox') {
    elements.push(...document.querySelectorAll('select'));
  }
  
  // If name is provided, filter by accessible name
  if (name) {
    const filteredElements = elements.filter(el => {
      const accessibleName = getAccessibleName(el);
      return exact 
        ? accessibleName === name 
        : accessibleName.includes(name);
    });
    
    // Return the element at the specified index or null
    return filteredElements[index] || null;
  }
  
  return elements[index] || null;
}</pre
          >
          <button class="copy-button" data-target="code-example">Copy Code</button>
        </div>

        <h3>Common ARIA Roles</h3>
        <ul>
          <li><code>textbox</code> - For text input fields</li>
          <li><code>button</code> - For buttons and clickable controls</li>
          <li><code>checkbox</code> - For checkboxes</li>
          <li><code>radio</code> - For radio buttons</li>
          <li><code>combobox</code> - For dropdowns and select elements</li>
          <li><code>link</code> - For links and anchors</li>
          <li><code>heading</code> - For headings (h1-h6)</li>
          <li><code>menu</code> - For navigation menus</li>
          <li><code>alert</code> - For notification messages</li>
        </ul>
      </div>
    </div>

    <script src="js/common.js"></script>
    <script>
      document.addEventListener('DOMContentLoaded', () => {
        initializeNavigation('aria-form.html')
        setupFormSubmitHandler('registration-form', 'form-result')
      })
    </script>
  </body>
</html>
